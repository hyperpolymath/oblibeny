// SPDX-License-Identifier: PMPL-1.0-or-later
// SPDX-FileCopyrightText: 2026 Jonathan D.A. Jewell

= Stapeln Integration: Interactive Image Designer
:toc:
:toclevels: 3

== Overview

**Stapeln** (German: "stacking") is an interactive GUI for designing minimal container images and distributions. It produces **Cerro Torre** images - formally verified, minimal Linux distributions built with Oblibeny.

== Name: Cerro Torre Distribution

**Cerro Torre** - Named after the iconic Patagonian mountain peak.

* ğŸ”ï¸ **Cerro** = Mountain/peak (Spanish)
* âœ… Easy spelling (no accents needed)
* ğŸ¯ Metaphor: Building upward from solid foundation (like distroless â†’ full image)
* ğŸ’ª Minimal, elegant, iconic

**Short form:** "Torre"

== Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STAPELN - Interactive Image Designer (ReScript GUI)   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Sidebar Config  â”‚  â”‚  Main Canvas              â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚  â”‚
â”‚  â”‚  â–¡ Base Layer    â”‚  â”‚  [Visualization]          â”‚  â”‚
â”‚  â”‚  â–¡ Networking    â”‚  â”‚                           â”‚  â”‚
â”‚  â”‚  â–¡ Storage       â”‚  â”‚  Distroless (20 files)    â”‚  â”‚
â”‚  â”‚  â–¡ Security      â”‚  â”‚    + liboqs (PQ crypto)   â”‚  â”‚
â”‚  â”‚  â–¡ Protocols     â”‚  â”‚    + obli-pkg             â”‚  â”‚
â”‚  â”‚  â–¡ Services      â”‚  â”‚    + hello binary         â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚                           â”‚  â”‚
â”‚  â”‚  [Analyze]       â”‚  â”‚  Total: 50 files, 17.5MB  â”‚  â”‚
â”‚  â”‚  [Export]        â”‚  â”‚                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ generates
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cerro Torre Image (.zpkg or Dockerfile)               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â€¢ Formally verified                                    â”‚
â”‚  â€¢ Minimal (only proven-necessary components)           â”‚
â”‚  â€¢ Post-quantum crypto                                  â”‚
â”‚  â€¢ Oblibeny package management                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

== GUI Design (ReScript + Deno)

=== Technology Stack

**Frontend:**
- **ReScript** - Type-safe UI logic (compiles to JS)
- **React** - Component framework
- **TailwindCSS** - Styling (CSS-first, accessible)
- **ARIA** - Full WCAG 2.3 AAA compliance

**Backend:**
- **Deno** - Runtime for tooling/APIs
- **Oblibeny** - Image build coordination
- **Zig** - Build execution

=== Main Interface

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stapeln - Cerro Torre Image Designer                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Configuration   â”‚  â”‚ Canvas                     â”‚   â”‚
â”‚  â”‚ Sidebar         â”‚  â”‚                            â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚  [Visual Layer Stack]      â”‚   â”‚
â”‚  â”‚                 â”‚  â”‚                            â”‚   â”‚
â”‚  â”‚ Build Mode:     â”‚  â”‚  Layer 5: hello (2MB)      â”‚   â”‚
â”‚  â”‚ â—‹ Bottom-up     â”‚  â”‚  Layer 4: obli-pkg (1MB)   â”‚   â”‚
â”‚  â”‚ â—‹ Top-down      â”‚  â”‚  Layer 3: liboqs (5MB)     â”‚   â”‚
â”‚  â”‚                 â”‚  â”‚  Layer 2: libsodium (200KB)â”‚   â”‚
â”‚  â”‚ Base Image:     â”‚  â”‚  Layer 1: Distroless (10MB)â”‚   â”‚
â”‚  â”‚ â–¼ Distroless    â”‚  â”‚  Layer 0: Linux kernel     â”‚   â”‚
â”‚  â”‚   Alpine        â”‚  â”‚                            â”‚   â”‚
â”‚  â”‚   Scratch       â”‚  â”‚  Total: 18.2MB, 52 files   â”‚   â”‚
â”‚  â”‚                 â”‚  â”‚                            â”‚   â”‚
â”‚  â”‚ Components:     â”‚  â”‚  [Export] [Analyze] [Build]â”‚   â”‚
â”‚  â”‚ â˜‘ Security      â”‚  â”‚                            â”‚   â”‚
â”‚  â”‚   â”œâ”€ PQ Crypto  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚   â””â”€ Signatures â”‚                                   â”‚
â”‚  â”‚ â˜ Networking    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   â”œâ”€ IPv6       â”‚  â”‚ Analyzer Output            â”‚   â”‚
â”‚  â”‚   â”œâ”€ HTTP/3     â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚   â”‚
â”‚  â”‚   â””â”€ DNS        â”‚  â”‚ âœ“ Security: PQ crypto OK   â”‚   â”‚
â”‚  â”‚ â˜ Storage       â”‚  â”‚ âš  Missing: DNS resolver    â”‚   â”‚
â”‚  â”‚ â˜ Init System   â”‚  â”‚ â„¹ Suggest: Add musl-dns    â”‚   â”‚
â”‚  â”‚                 â”‚  â”‚                            â”‚   â”‚
â”‚  â”‚ [Clear All]     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

=== Configuration Modes

**1. Imperative Mode** - Manual selection
```
"Add this component"
â–¡ liboqs (PQ crypto)
â–¡ libsodium (symmetric crypto)
â–¡ obli-pkg (package manager)
```

**2. Declarative Mode** - Requirements-based
```
"I need these features"
â–¡ Single-process container
â–¡ Network connectivity (IPv6)
â–¡ Package management
â–¡ Post-quantum security
```

**Analyzer automatically suggests:**
```
Based on your requirements:
âœ“ Distroless base (for single-process)
+ liboqs (for PQ security)
+ obli-pkg (for package management)
+ musl-dns (for network connectivity)
```

== Configuration Schema (Nickel)

```nickel
// stapeln-config.ncl
{
  build_mode: 'BottomUp | 'TopDown,

  base_image: {
    type: 'Distroless | 'Alpine | 'Scratch,
    version: String,
  },

  components: {
    security: {
      post_quantum: Bool,
      classical_compat: Bool,
      algorithms: {
        signatures: ['Dilithium5AES, 'Ed448, 'SPHINCSpls],
        kem: ['Kyber1024],
        symmetric: ['XChaCha20Poly1305],
        hashing: ['SHAKE3_512, 'BLAKE3],
      },
    },

    networking: {
      enabled: Bool,
      protocols: {
        ipv4: Bool,  // False by default
        ipv6: Bool,  // True by default
        http: ['HTTP3 | 'HTTP2 | 'HTTP1_1,  // Only HTTP3 allowed
      },
      services: {
        dns: Bool,
        dhcp: Bool,
        routing: {
          static: Bool,
          bgp: Bool,
          ospf: Bool,
        },
      },
    },

    storage: {
      filesystem: 'ReadOnly | 'Ephemeral | 'Persistent,
      oram: Bool,  // Oblivious RAM for privacy
    },

    init_system: {
      type: 'None | 'SingleProcess | 'Minimal | 'Full,
    },

    packages: [String],  // List of package names
  },

  output: {
    format: 'Dockerfile | 'Zpkg | 'OCI,
    name: String,
    version: String,
  },
}
```

== Hierarchical Component Tree

=== Example: Networking Component

```
â˜ Networking
  â”œâ”€ IP Stack
  â”‚   â”œâ”€ â˜‘ IPv6 only
  â”‚   â””â”€ â˜ IPv4 (deprecated)
  â”‚
  â”œâ”€ Protocols
  â”‚   â”œâ”€ â˜‘ HTTP/3 + QUIC
  â”‚   â”œâ”€ â˜ HTTP/2
  â”‚   â””â”€ â˜ HTTP/1.1 (forbidden)
  â”‚
  â”œâ”€ DNS
  â”‚   â”œâ”€ â˜ Resolver
  â”‚   â”œâ”€ â˜ Authoritative server
  â”‚   â””â”€ â˜ DNS-over-HTTPS
  â”‚
  â”œâ”€ Routing
  â”‚   â”œâ”€ â˜ Static routes
  â”‚   â”œâ”€ â˜ BGP
  â”‚   â”œâ”€ â˜ OSPF
  â”‚   â””â”€ â˜ IS-IS
  â”‚
  â””â”€ Services
      â”œâ”€ â˜ DHCP client
      â”œâ”€ â˜ NTP client
      â””â”€ â˜ mDNS/Avahi
```

**Clicking "Networking" expands sub-options.**

=== Example: Security Component

```
â˜‘ Security
  â”œâ”€ Cryptography
  â”‚   â”œâ”€ â˜‘ Post-quantum (liboqs)
  â”‚   â”‚   â”œâ”€ â˜‘ Dilithium5-AES
  â”‚   â”‚   â”œâ”€ â˜‘ Kyber-1024
  â”‚   â”‚   â””â”€ â˜‘ SPHINCS+
  â”‚   â”‚
  â”‚   â”œâ”€ â˜‘ Classical (libsodium)
  â”‚   â”‚   â”œâ”€ â˜‘ Ed448
  â”‚   â”‚   â”œâ”€ â˜‘ XChaCha20-Poly1305
  â”‚   â”‚   â””â”€ â˜‘ Argon2id
  â”‚   â”‚
  â”‚   â””â”€ Hashing
  â”‚       â”œâ”€ â˜‘ SHAKE3-512
  â”‚       â”œâ”€ â˜‘ BLAKE3
  â”‚       â””â”€ â˜ SHA-256 (deprecated)
  â”‚
  â”œâ”€ Package Signatures
  â”‚   â”œâ”€ â˜‘ Verify all signatures
  â”‚   â”œâ”€ â˜‘ Dilithium5 required
  â”‚   â””â”€ â˜‘ Ed448 required
  â”‚
  â””â”€ Access Control
      â”œâ”€ â˜ Capabilities
      â”œâ”€ â˜ SELinux
      â””â”€ â˜ AppArmor
```

== Analyzer (Smart Suggestions)

=== Input: User Requirements

```typescript
// User selects in GUI:
requirements = {
  networking: true,
  singleProcess: false,
  packageManagement: true,
  security: "post-quantum",
}
```

=== Analyzer Logic (ReScript)

```rescript
// src/analyzer/Analyzer.res
module Analyzer = {
  type requirement = {
    networking: bool,
    singleProcess: bool,
    packageManagement: bool,
    security: string,
  }

  type suggestion = {
    component: string,
    reason: string,
    size: int,
    required: bool,
  }

  let analyze = (req: requirement): array<suggestion> => {
    let suggestions = []

    // Always need distroless base
    suggestions->Array.push({
      component: "distroless-static",
      reason: "Minimal base layer",
      size: 10_000_000,  // 10MB
      required: true,
    })

    // Post-quantum security
    if req.security == "post-quantum" {
      suggestions->Array.push({
        component: "liboqs",
        reason: "Post-quantum cryptography (Dilithium5, Kyber-1024)",
        size: 5_000_000,  // 5MB
        required: true,
      })

      suggestions->Array.push({
        component: "libsodium",
        reason: "Classical crypto compatibility (Ed448, XChaCha20)",
        size: 200_000,  // 200KB
        required: true,
      })
    }

    // Package management
    if req.packageManagement {
      suggestions->Array.push({
        component: "obli-pkg",
        reason: "Oblibeny package manager (Zig, static)",
        size: 1_000_000,  // 1MB
        required: true,
      })
    }

    // Networking
    if req.networking {
      suggestions->Array.push({
        component: "musl-dns",
        reason: "DNS resolver for network connectivity",
        size: 50_000,  // 50KB
        required: true,
      })

      suggestions->Array.push({
        component: "quiche",
        reason: "HTTP/3 + QUIC protocol support",
        size: 2_000_000,  // 2MB
        required: false,  // Optional if only DNS needed
      })
    }

    // Init system (if multi-process)
    if !req.singleProcess {
      suggestions->Array.push({
        component: "minimal-init",
        reason: "Minimal init system (Zig-based, ~100KB)",
        size: 100_000,
        required: true,
      })
    }

    suggestions
  }

  let calculateTotal = (suggestions: array<suggestion>): (int, int) => {
    let required = suggestions
      ->Array.filter(s => s.required)
      ->Array.reduce(0, (acc, s) => acc + s.size)

    let total = suggestions
      ->Array.reduce(0, (acc, s) => acc + s.size)

    (required, total)
  }
}
```

=== Output: Suggestions Panel

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Analyzer Suggestions                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚ âœ“ Required Components (15.2 MB):      â”‚
â”‚   â€¢ distroless-static (10 MB)         â”‚
â”‚   â€¢ liboqs (5 MB)                     â”‚
â”‚   â€¢ libsodium (200 KB)                â”‚
â”‚   â€¢ obli-pkg (1 MB)                   â”‚
â”‚                                        â”‚
â”‚ â„¹ Optional Components (2 MB):         â”‚
â”‚   â€¢ quiche (2 MB) - for HTTP/3        â”‚
â”‚                                        â”‚
â”‚ âš  Warnings:                           â”‚
â”‚   â€¢ You selected networking but no    â”‚
â”‚     DNS resolver. Add musl-dns?       â”‚
â”‚                                        â”‚
â”‚ [Apply All Required]                  â”‚
â”‚ [Show Dependency Graph]               â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

== Export Formats

=== 1. Dockerfile Output

```dockerfile
# Generated by Stapeln - Cerro Torre Image Designer
# Base: Distroless (bottom-up)
# Security: Post-quantum (Dilithium5, Kyber-1024)
# Total: 17.5 MB, 52 files

FROM gcr.io/distroless/static-debian12

# Add crypto libraries
COPY --from=builder /usr/lib/liboqs.so.0.11.0 /usr/lib/
COPY --from=builder /usr/lib/libsodium.so.26 /usr/lib/

# Add package manager
COPY --from=builder /usr/bin/obli-pkg /usr/bin/

# Add application
COPY --from=builder /usr/bin/hello /usr/bin/

# Metadata
LABEL org.opencontainers.image.title="Cerro Torre - Hello"
LABEL org.opencontainers.image.security="post-quantum"
LABEL org.opencontainers.image.size="17.5MB"

ENTRYPOINT ["/usr/bin/hello"]
```

=== 2. Oblibeny .zpkg Manifest

```scheme
;; Generated by Stapeln
(define cerro-torre-image
  '((name "cerro-torre-hello")
    (version "1.0.0")
    (base "distroless-static")

    (layers
      ((layer-0 "distroless-static" 10485760)  ; 10MB
       (layer-1 "liboqs" 5242880)              ; 5MB
       (layer-2 "libsodium" 204800)            ; 200KB
       (layer-3 "obli-pkg" 1048576)            ; 1MB
       (layer-4 "hello" 2097152)))             ; 2MB

    (security
      ((post-quantum #t)
       (signatures ("Dilithium5-AES" "Ed448" "SPHINCS+"))
       (hashing ("SHAKE3-512" "BLAKE3"))))

    (networking
      ((enabled #f)))

    (proven-necessary
      ((obli-pkg "Package management required")
       (liboqs "Post-quantum security required")
       (libsodium "Classical crypto compatibility")))))
```

=== 3. Nickel Configuration

```nickel
# Generated by Stapeln
{
  name = "cerro-torre-hello",
  version = "1.0.0",

  build_mode = 'BottomUp,
  base_image = { type = 'Distroless, version = "debian12" },

  components = {
    security = {
      post_quantum = true,
      algorithms = {
        signatures = ['Dilithium5AES, 'Ed448, 'SPHINCSpls],
        kem = ['Kyber1024],
      },
    },
    networking = { enabled = false },
    packages = ["hello"],
  },

  total_size = 17_500_000,  # 17.5 MB
  total_files = 52,
}
```

== Import/Export Workflow

```
User Actions:
1. Design image in Stapeln GUI
2. Click "Export"
3. Choose format: Dockerfile | .zpkg | Nickel
4. Save to file

Sharing:
5. Share file with team
6. Team member clicks "Import"
7. Stapeln loads configuration
8. Visual design restored
9. Can modify and re-export
```

== Integration with Oblibeny

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stapeln GUI     â”‚
â”‚  (ReScript)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ generates
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Nickel Config   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ parsed by
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Oblibeny        â”‚
â”‚  (Constrained)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ calls
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Zig FFI         â”‚
â”‚  (Build Image)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ outputs
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cerro Torre     â”‚
â”‚  Image (.zpkg)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

== Technology Summary

| Layer | Technology | Purpose |
|-------|-----------|---------|
| **GUI** | ReScript + React | Type-safe UI |
| **Styling** | TailwindCSS | WCAG 2.3 AAA |
| **Runtime** | Deno | Tooling/APIs |
| **Config** | Nickel | Type-safe configuration |
| **Build** | Oblibeny | Constrained-form coordination |
| **Execution** | Zig | FFI implementation |
| **Output** | Cerro Torre | Minimal verified image |

== Next Steps

1. Create Stapeln repository
2. Implement ReScript GUI components
3. Build analyzer logic
4. Integrate with Oblibeny build system
5. Add import/export functionality
6. Create preset configurations

== Related Documents

* link:DISTROLESS-BOOTSTRAP.adoc[Distroless Bootstrap]
* link:SECURITY-ARCHITECTURE.adoc[Security Architecture]
* link:PACKAGE-FORMAT-SPEC.adoc[Package Format]
