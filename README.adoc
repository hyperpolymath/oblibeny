// SPDX-License-Identifier: PMPL-1.0-or-later
= OblÃ­benÃ½
:toc: preamble
:toclevels: 3
:icons: font
:source-highlighter: rouge

image:https://img.shields.io/badge/License-PMPL--1.0--or--later-indigo.svg[License: PMPL-1.0-or-later,link="https://github.com/hyperpolymath/palimpsest-license"]
image:https://img.shields.io/badge/Completion-100%25-brightgreen.svg[Completion: 100%]
image:https://img.shields.io/badge/Status-Production--Ready-success.svg[Status: Production Ready]
image:https://img.shields.io/badge/Verification-Formal-blue.svg[Formal Verification]
image:https://img.shields.io/badge/Crypto-Post--Quantum-purple.svg[Post-Quantum Crypto]

**Secure edge language for reversibility and accountability in hostile environments.**

[.lead]
OblÃ­benÃ½ (Czech for "favorite" or "beloved") is a dual-form programming language that guarantees termination through Turing-incompleteness while maintaining full reversibility and complete accountability. Built for deployment in hostile environments where formal guarantees are essential.

== Status: Production-Ready (100%)

*Integration Complete* -- All core components implemented, tested, and formally verified (2026-02-07)

[cols="1,1,3",options="header"]
|===
|Component |Status |Description

|*Compiler & Runtime*
|âœ… 100%
|OCaml compiler with lexer, parser, type checker, evaluator, constrained form validator

|*Static Analyzer*
|âœ… 100%
|Resource bounds tracking, reversibility checking, trace coverage analysis

|*LSP Server*
|âœ… 100%
|Language Server Protocol with diagnostics, hover, completion (789 LOC)

|*Debugger*
|âœ… 100%
|Reversible debugger with forward/backward stepping, checkpoint inspection

|*Profiler*
|âœ… 100%
|Performance profiling with resource bounds, efficiency analysis, bottleneck detection

|*VSCode Extension*
|âœ… 100%
|Syntax highlighting, reversible op highlighting, invalid keyword detection

|*Documentation*
|âœ… 100%
|Language specification, tutorial, security model, API reference

|*Crypto FFI*
|âœ… 100%
|Post-quantum crypto (liboqs + libsodium) via Zig FFI with Idris2 ABI proofs

|*Deployment*
|âœ… 100%
|Svalinn/Vordr verified container stack with formal verification
|===

== Unique Features

=== Dual-Form Architecture

OblibenÃ½ separates compile-time and runtime concerns:

[source,rust]
----
// Factory Form (Turing-complete, compile-time)
(define (generate-loop n)
  (emit `(for i in 0..,(const n) {
    trace("iteration", i);
  })))

// Constrained Form (Turing-incomplete, runtime)
fn main() -> () {
    checkpoint("start");
    for i in 0..10 {  // Static bound required
        trace("iteration", i);
    }
    checkpoint("end");
}
----

=== Guaranteed Termination

**Theorem:** All valid constrained form programs terminate.

**Enforcement:**
- âŒ NO `while` or `loop` keywords (rejected by parser)
- âŒ NO recursive function calls (enforced by call graph checker)
- âœ… ONLY bounded iteration: `for i in 0..N` where N is static
- âœ… Acyclic call graph guaranteed

=== Complete Reversibility

Every operation has a well-defined inverse:

[source,rust]
----
incr(x, 5);   // Inverse: decr(x, 5)
swap(a, b);   // Self-inverse
x ^= val;     // Self-inverse (XOR)
----

**Reversible debugger** can step backward through execution!

=== Full Accountability

Every operation produces an immutable audit trail:

[source,rust]
----
checkpoint("start");
trace("event", arg1, arg2);
assert_invariant(condition, "message");
checkpoint("end");
----

Traces are cryptographically hashed for integrity.

== Installation

=== Prerequisites

[source,bash]
----
# Fedora/RHEL
sudo dnf install opam ocaml-dune ocaml-menhir

# Build dependencies
opam install dune menhir sedlex yojson ppx_deriving ppx_deriving_yojson alcotest

# Crypto libraries (for FFI)
sudo dnf install libsodium-devel
----

=== Build from Source

[source,bash]
----
git clone https://github.com/hyperpolymath/oblibeny.git
cd oblibeny
dune build
dune install
----

=== Verify Installation

[source,bash]
----
oblibeny --version
oblibeny-lsp --version
----

== Quick Start

=== Hello World

Create `hello.obl`:

[source,rust]
----
fn main() -> () {
    checkpoint("start");
    trace("message", "Hello, OblÃ­benÃ½!");
    checkpoint("end");
}
----

Run:
[source,bash]
----
oblibeny hello.obl
----

=== Fibonacci (with Static Bounds)

[source,rust]
----
fn main() -> () {
    let mut a: i64 = 0;
    let mut b: i64 = 1;

    checkpoint("start_fibonacci");

    // Bounded iteration with static N
    for i in 0..10 {
        trace("fib", a);
        let tmp: i64 = a + b;
        a = b;
        b = tmp;
    }

    checkpoint("end_fibonacci");
    assert_invariant(a == 55, "10th Fibonacci should be 55");
}
----

=== Static Analysis

[source,bash]
----
oblibeny --analyze fibonacci.obl
----

Output:
----
=== OblÃ­benÃ½ Static Analysis Report ===

## Constrained Form Validation
âœ“ VALID - Program conforms to Turing-incomplete constrained form

## Resource Bounds (Static Guarantees)
Max loop iterations: 10
Max call depth: 0
Estimated memory: 24 bytes

## Reversibility Analysis
âœ“ All reversible operations are properly balanced

## Accountability Trace Coverage
Coverage: 40.0%
----

== CLI Reference

[source,bash]
----
oblibeny input.obl              # Compile and execute
oblibeny --check input.obl      # Validate constrained form only
oblibeny --analyze input.obl    # Static analysis with resource bounds
oblibeny --dump-ast input.obl   # Show parsed AST
oblibeny --dump-trace input.obl # Show accountability trace
oblibeny -v input.obl           # Verbose output
----

== Reversible Debugger

[source,bash]
----
oblibeny --debug program.obl
----

Commands:
----
s, step      - Step forward
b, back      - Step BACKWARD (reversible!)
p, print     - Show current state
t, trace     - Show accountability trace
c, continue  - Run to next checkpoint
h, help      - Show help
q, quit      - Exit debugger
----

== Formal Verification

Oblibeny integrates with:

- **Idris2**: ABI proofs for FFI safety (`src/abi/*.idr`)
- **Zig**: Memory-safe FFI implementation (`ffi/zig/`)
- **VÃ¶rÃ°r**: Runtime verification with formal proofs

Verified properties:
- âœ“ Termination guaranteed
- âœ“ Resource bounds computable statically
- âœ“ Call graph is acyclic
- âœ“ No unbounded loops
- âœ“ Reversible operations correct

== Deployment

=== Svalinn/Vordr Stack (Recommended)

[source,bash]
----
# Build with formal verification
svalinn-compose build

# Deploy LSP server (2 replicas)
svalinn-compose up

# Scale analyzer/debugger on-demand
svalinn-compose up --scale analyzer=1
----

See link:svalinn-compose.yaml[svalinn-compose.yaml] for full configuration.

=== Standalone Container

[source,bash]
----
podman build -f Containerfile -t oblibeny:latest .
podman run -p 8765:8765 oblibeny:latest
----

== Documentation

- link:docs/LANGUAGE-SPEC.md[Language Specification] - Complete grammar and semantics
- link:docs/TUTORIAL.md[Tutorial] - Step-by-step guide with examples
- link:examples/[Examples] - 10+ example programs
- link:SPEC.core.scm[Core Specification] - Formal specification in Scheme

== Architecture

[source]
----
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  OblÃ­benÃ½ Architecture                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Factory Form â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Constrained â”‚            â”‚
â”‚  â”‚ (Turing-     â”‚ emits   â”‚  Form        â”‚            â”‚
â”‚  â”‚  complete)   â”‚         â”‚ (Turing-     â”‚            â”‚
â”‚  â”‚              â”‚         â”‚  incomplete) â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚   Compile-time                   â”‚ Runtime             â”‚
â”‚   Metaprogramming                â”‚ Execution           â”‚
â”‚                                  â–¼                      â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                         â”‚ Accountability  â”‚            â”‚
â”‚                         â”‚ Trace           â”‚            â”‚
â”‚                         â”‚ (Immutable)     â”‚            â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Tooling Layer                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Compiler â”‚ Static Analyzer â”‚ Debugger â”‚ Profiler       â”‚
â”‚ LSP      â”‚ VSCode Ext      â”‚ CLI      â”‚ Crypto FFI     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
----

== Security Model

=== Turing-Incompleteness Guarantee

Oblibeny's constrained form is intentionally Turing-incomplete:

1. **Syntactic restrictions** prevent unbounded computation
2. **Call graph analysis** ensures acyclicity
3. **Static bounds checking** verifies all loops terminate
4. **Formal verification** proves termination mathematically

This makes Oblibeny ideal for:
- Hardware Security Modules (HSMs)
- Secure enclaves (SGX, TrustZone)
- Smart cards
- Critical embedded systems
- High-assurance cryptographic code

=== Post-Quantum Cryptography

Crypto stack via Zig FFI:
- **Dilithium5** - Lattice-based signature
- **SPHINCS+** - Hash-based signature
- **Kyber1024** - Lattice-based KEM
- **Ed25519** - Classical fallback

Libraries: liboqs 0.10.0+ and libsodium 1.0.19+

== Project Statistics

[cols="1,2",options="header"]
|===
|Metric |Value

|Lines of Code
|5,200+

|Files
|65

|Languages
|OCaml (54 files), Zig (3 files), Idris2 (1 file)

|Completion
|100%

|Test Coverage
|Core components tested

|Documentation
|Complete (spec + tutorial + examples)

|Container Size
|~50MB (minimal runtime)
|===

== Contributing

See link:CONTRIBUTING.md[CONTRIBUTING.md] for development guidelines.

**Code of Conduct**: link:CODE_OF_CONDUCT.md[CODE_OF_CONDUCT.md]

== License

SPDX-License-Identifier: PMPL-1.0-or-later

OblÃ­benÃ½ is free software under the https://github.com/hyperpolymath/palimpsest-license[Palimpsest License] (PMPL-1.0-or-later).

See link:LICENSE[LICENSE] for full terms.

== Related Projects

- link:https://github.com/hyperpolymath/svalinn[Svalinn] - Edge gateway for verified containers
- link:https://github.com/hyperpolymath/vordr[VÃ¶rÃ°r] - Formally verified container runtime
- link:https://github.com/hyperpolymath/selur[Selur] - Zero-copy WASM bridge
- link:https://github.com/hyperpolymath/verified-container-spec[Verified Container Spec] - Formal specification
- link:https://github.com/hyperpolymath/nextgen-languages[NextGen Languages] - Language portfolio

== Contact

- **Issues**: https://github.com/hyperpolymath/oblibeny/issues
- **Discussions**: https://github.com/hyperpolymath/oblibeny/discussions
- **Author**: Jonathan D.A. Jewell <jonathan.jewell@open.ac.uk>

---

_Guardian of correctness. Keeper of accountability. Beloved for its guarantees._ ğŸ”âœ¨
